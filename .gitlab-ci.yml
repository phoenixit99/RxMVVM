stages:
  - build
  - test
  - release
  - deploy
  
variables:
  LC_ALL: "en_US.UTF-8"
  LANG: "en_US.UTF-8"
  YOUR_PERSONAL_TOKEN: "sCYyAFR8y4x7oyKDzmWy"

before_script:
    - git config --global user.name "Nguyen_Hoang99"
    - git config --global user.email "hoanguit@gmail.com"

build_project:
  stage: build
  script:
    - bundle exec fastlane test
    - git remote add https-origin https://gitlab-ci-token:${YOUR_PERSONAL_TOKEN}@gitlab.com:Nguyen_Hoang99/RxMVVM.git
    - git tag develop
    - git push https-origin -o ci.skip refs/tags/develop
  tags:
    - master

# build_project:
#   stage: build
#   script:
#     - sudo gem install bundler
#     - bundle install
#     - bundle exec fastlane build
#   tags:
#     - master

# release:
#   stage: release
#   script:
#   - bundle exec fastlane release
#   artifacts:
#     paths:
#       - build/RxMVVM.ipa
#   tags:
#     - stable
#   only:
#      - /^release-.*$/
#      - develop
# deploy:
#   stage: deploy
#   script:
#   - bundle exec fastlane deploy
#   tags:
#     - master
